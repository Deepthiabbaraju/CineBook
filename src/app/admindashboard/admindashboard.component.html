<main>
    <div class="tab">
      <button class="tablinks" (click)="openTab('movies-section')">Movies</button>
      <button class="tablinks" (click)="openTab('theatres-section')">Theatres</button>
      <button class="tablinks" (click)="openTab('shows-section')">Shows</button>
      <button class="logout" (click)="logout()">Logout</button>
    </div>
  
    <section id="movies-section" class="tabcontent" [ngClass]="{'active': activeTab === 'movies-section'}">
      <h2>Movies</h2>
      <div id="movie-controls">
        <button *ngIf="!showAddMovieForm" (click)="showAddMovieForm = true">Add Movie</button>
        <div *ngIf="showAddMovieForm">
          <h3>Add Movie</h3>
          <form (ngSubmit)="addMovie()">
            <label for="movie-title">Title:</label>
            <input type="text" id="movie-title" [(ngModel)]="newMovie.title" name="title" required>
            <label for="movie-genre">Genre:</label>
            <input type="text" id="movie-genre" [(ngModel)]="newMovie.genre" name="genre" required>
            <label for="movie-release-date">Release Date:</label>
            <input type="date" id="movie-release-date" [(ngModel)]="newMovie.releaseDate" name="releaseDate" required>
            <label for="movie-language">Language:</label>
            <input type="text" id="movie-language" [(ngModel)]="newMovie.language" name="language" required>
            <label for="movie-location">Location:</label>
            <input type="text" id="movie-location" [(ngModel)]="newMovie.location" name="location" required>
            <label for="movie-image-url">Image URL:</label>
            <input type="text" id="movie-image-url" [(ngModel)]="newMovie.imageUrl" name="imageUrl" required>
            <label for="movie-duration">Duration:</label>
            <input type="text" id="movie-duration" [(ngModel)]="newMovie.duration" name="duration" required>
            <button type="submit" id="btn">Add Movie</button>
            <button type="button" (click)="cancelAddMovie()">Cancel</button>
          </form>
        </div>
      </div>
      <div #editMovieForm id="edit-movie-form" *ngIf="showEditMovieForm">
        <h3>Edit Movie</h3>
        <form (ngSubmit)="updateMovie()">
          <label for="title">Title:</label>
          <input type="text" id="title" [(ngModel)]="editMovie.title" name="title" required>
  
          <label for="genre">Genre:</label>
          <input type="text" id="genre" [(ngModel)]="editMovie.genre" name="genre" required>
  
          <label for="releaseDate">Release Date:</label>
          <input type="date" id="releaseDate" [(ngModel)]="editMovie.releaseDate" name="releaseDate" required>
  
          <label for="location">Location:</label>
          <input type="text" id="location" [(ngModel)]="editMovie.location" name="location" required>
          <label for="language">Language:</label>
          <input type="text" id="language" [(ngModel)]="editMovie.language" name="language" required>
          <label for="duration">Duration:</label>
          <input type="text" id="duration" [(ngModel)]="editMovie.duration" name="duration" required>
  
          <label for="imageUrl">Image URL:</label>
          <input type="text" id="imageUrl" [(ngModel)]="editMovie.imageUrl" name="imageUrl" required>
  
          <button type="submit">Update</button>
          <button type="button" (click)="cancelEdit()">Cancel</button>
        </form>
      </div>
      <div id="movies-list">
        <div *ngFor="let movie of moviesData" class="movie-box">
          <img [src]="movie.imageUrl" alt="{{ movie.title }}">
          <h3>{{ movie.title }}</h3>
          <p>Genre: {{ movie.genre }}</p>
          <p>Release Date: {{ movie.releaseDate | date: 'dd MMMM yyyy' }}</p>
          <p>Language: {{ movie.language }}</p>
          <p>Location: {{ movie.location }}</p>
          <p>Duration: {{ movie.duration }}</p>
          <button (click)="editMovieMethod(movie.id)">Edit Movie</button>
          <button (click)="deleteMovie(movie.id)">Delete Movie</button>
        </div>
      </div>
    </section>
  
    <section id="theatres-section" class="tabcontent" [ngClass]="{'active': activeTab === 'theatres-section'}">
      <h2>Theatres</h2>
      <div id="theatre-controls">
        <button (click)="showAddTheatreForm = !showAddTheatreForm">{{ showAddTheatreForm ? 'Cancel' : 'Add Theatre' }}</button></div>
        <div id="add-theatre-form" *ngIf="showAddTheatreForm">
          <h3>Add Theatre</h3>
          <form (ngSubmit)="addTheatre()">
            <label for="theatre-name">Theatre Name:</label>
            <input type="text" id="theatre-name" [(ngModel)]="newTheatre.name" name="name" required>
            <label for="theatre-location">Theatre Location:</label>
            <input type="text" id="theatre-location" [(ngModel)]="newTheatre.location" name="location" required>
            <button type="submit">Add Theatre</button>
            
          </form>
        
      </div>
      <div id="theatres-list">
        <div *ngFor="let theatre of theatresData" class="theatre-box">
            <h3>{{ theatre.name }}</h3>
            <p>Location: {{ theatre.location }}</p>
            <button (click)="deleteTheatre(theatre.id)" class="delete-button">Delete Theatre</button>
        </div>
      </div>
    </section>
  
    <section id="shows-section" class="tabcontent" [ngClass]="{'active': activeTab === 'shows-section'}">
      <h2>Shows</h2>
      
        <div id="show-controls">
          <button (click)="showAddShowForm = !showAddShowForm">
              {{ showAddShowForm ? 'Cancel' : 'Add Show' }}
          </button></div>
        <div id="add-show-form" *ngIf="showAddShowForm">
          <h3>Add Show</h3>
          <form (ngSubmit)="addShow()">
            <div class="form-group">
            <label for="show-movie">Movie:</label>
            <select id="show-movie" [(ngModel)]="newShow.movieId" name="show-movie" required>
                <option *ngFor="let movie of moviesData" [value]="movie.id">{{ movie.title }}</option>
            </select>
            </div>
            <div class="form-group">
            <label for="show-theatre">Theatre:</label>
            <select id="show-theatre" [(ngModel)]="newShow.theatreId" name="show-theatre" required>
                <option *ngFor="let theatre of theatresData" [value]="theatre.id">{{ theatre.name }}</option>
            </select></div>
            <div class="form-group">
            <label for="show-time">Show Time:</label>
            <input type="datetime-local" id="show-time" [(ngModel)]="newShow.showTime" name="show-time" required></div>
            <div class="form-group">
            <label for="available-seats">Available Seats:</label>
            <input type="number" id="available-seats" [(ngModel)]="newShow.availableSeats" name="available-seats" required></div>
            <button type="submit">Add Show</button>
          </form>
        </div>
      
        <div id="shows-list">
          <div *ngFor="let show of showsData" class="show-box">
              <h3>{{ show.movieId }} - {{ show.theatreId }}</h3>
              <p>Show Time: {{ show.showTime | date:'yyyy-MM-dd HH:mm:ss' }}</p>
              <p>Available Seats: {{ show.availableSeats }}</p>
              <button (click)="deleteShow(show.id)" class="delete-button">Delete Show</button>
          </div>
      </div>
    </section>
  </main>
  